import{l as c,i as I,m as F,A as G,W as b,r as z,h as i,o as n,a as l,u as _,g as K,w as k,b as e,t as r,c as R,e as w,j as W,F as y,z as C,y as H,n as J,f as q}from"./app-BFIzMVFd.js";import{_ as P}from"./AuthenticatedLayout-C6jx-peY.js";import{_ as Q}from"./Pagination-Mj91XlTq.js";import{_ as X}from"./SearchInput-D6kPj4dm.js";import Y from"./CreateGutulsModal-CbYZVxHs.js";import{_ as S}from"./Tooltip-CKiwYQvw.js";import Z from"./LampiranModal-DgAVUKvQ.js";import ee from"./DeleteNotaModal-DqQRWo7r.js";import{_ as te}from"./SuccessFlash-K6L5X7l6.js";import{f as N,a as se}from"./formatters--Bkvj4ca.js";import"./Modal-By5cnOVT.js";import"./InputError-CQqX-vWw.js";import"./PrimaryButton-DMpJWd03.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-B7RMHXRj.js";import"./DangerButton-DalIR-J_.js";const ae={class:"pt-6 sm:pt-24 mx-2 sm:px-2"},oe={class:"max-w-8xl mx-auto lg:px-6 pb-4 space-y-4"},ne={class:"bg-gradient-to-br from-indigo-600 to-blue-500 text-white rounded-lg p-6 shadow-md flex flex-col sm:flex-row justify-between items-start sm:items-center"},le={class:"text-3xl font-bold"},ie={class:"text-sm mt-1 opacity-80"},re={class:"bg-white rounded-lg shadow p-6 mt-4 space-y-4"},de={class:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3"},ue={class:"flex items-center space-x-1"},ce=["checked"],me=["value"],ge={key:0,class:"text-center text-gray-500 py-10"},pe={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},he={class:"flex items-center justify-between mb-2"},fe={class:"text-lg font-semibold text-indigo-700"},xe={class:"text-gray-700"},ve={class:"text-sm text-gray-500 mt-1"},be={class:"text-green-600"},_e={class:"text-gray-700"},ke={key:0,class:"text-gray-700 mx-2"},we={key:1,class:"inline-block bg-green-100 text-green-800 text-xs font-semibold px-2 py-0.5 rounded-full shadow-sm"},ye={class:"mt-2 text-sm text-gray-600"},je={key:0,class:"mt-1"},Ce={class:"list-disc ml-4"},Se={class:"text-xs text-red-500"},De={class:"flex justify-end mt-2 gap-1"},$e=["onClick"],Me=["onClick"],Ne=["onClick"],Je={__name:"GuTuLsBySkpd",props:{skpd:Object,notaDinas:Object,search:String,parentNotes:Array,tahun:String,jenisOptions:Array,jenisSelected:String,is_belanja_modal:String,kegiatanOptions:Array,subKegiatanOptions:Array},setup(o){const d=o,m=c(d.search||""),D=I(()=>F().props.flash||{}),B=()=>{D.value.success=null},g=c(!1),f=c(null),x=c({show:!1,notaDinas:null}),v=c({show:!1,notaId:null}),O=()=>{f.value=null,g.value=!0},U=a=>{var t;f.value={...a,parent_ids:(t=a.dikaitkan_oleh)!=null&&t.length?[a.dikaitkan_oleh[0].id]:[],lampirans:a.lampirans?a.lampirans.map(h=>({...h})):[]},g.value=!0},A=a=>{x.value={show:!0,notaDinas:a}},L=a=>{v.value={show:!0,notaId:a.id}},$=a=>{a==="attachment"&&(v.value.show=!1),a==="delete"&&(x.value.show=!1)},M=()=>{g.value=!1,b.reload({only:["notaDinas"]})};G(m,a=>{b.get(route("nota-dinas.nota-gutuls",d.skpd.id),{search:a},{preserveState:!0,replace:!0})});const T=a=>({GU:"bg-yellow-100 text-yellow-800",TU:"bg-indigo-100 text-indigo-800",LS:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",p=c(d.jenisSelected||""),V=a=>{p.value=a,b.get(route("nota-dinas.nota-gutuls",d.skpd.id),{search:m.value,jenis:a},{preserveState:!0,replace:!0})},j=c(d.is_belanja_modal||""),E=a=>{j.value=a?"true":"",b.get(route("nota-dinas.nota-gutuls",d.skpd.id),{search:m.value,jenis:p.value,is_belanja_modal:j.value},{preserveState:!0,replace:!0})};return(a,t)=>{const h=z("font-awesome-icon");return n(),i(y,null,[l(_(K),{title:`Nota GU/TU/LS - ${o.skpd.nama_skpd}`},null,8,["title"]),l(P,null,{default:k(()=>[l(te,{flash:D.value,onClearFlash:B},null,8,["flash"]),e("div",ae,[e("div",oe,[e("div",ne,[e("div",null,[e("h2",le,r(o.skpd.nama_skpd),1),e("p",ie,"Tahun: "+r(o.tahun),1)])]),e("div",re,[e("div",de,[l(X,{search:m.value,"onUpdate:search":t[0]||(t[0]=s=>m.value=s),class:"w-full sm:flex-1",placeholder:"Cari no/perihal..."},null,8,["search"]),e("div",ue,[e("input",{id:"belanjaModal",type:"checkbox",checked:j.value==="true",onChange:t[1]||(t[1]=s=>E(s.target.checked)),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,40,ce),t[7]||(t[7]=e("label",{for:"belanjaModal",class:"text-sm text-gray-700"},"Belanja Modal",-1))]),e("div",null,[W(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),onChange:t[3]||(t[3]=s=>V(p.value)),class:"w-full sm:w-30 rounded border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[t[8]||(t[8]=e("option",{value:""},"Semua Jenis",-1)),(n(!0),i(y,null,C(o.jenisOptions,s=>(n(),i("option",{key:s,value:s},r(s),9,me))),128))],544),[[H,p.value]])]),e("div",null,[e("button",{onClick:O,class:"w-full sm:w-auto px-3 py-2 bg-indigo-500 text-white text-sm font-medium rounded hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors shadow-sm"}," + Buat Nota ")])]),o.notaDinas.data.length===0?(n(),i("div",ge,t[9]||(t[9]=[e("p",{class:"text-lg"},"Belum ada nota GU/TU/LS yang tercatat.",-1)]))):(n(),i("div",pe,[(n(!0),i(y,null,C(o.notaDinas.data,s=>(n(),i("div",{key:s.id,class:"rounded-lg shadow-lg border hover:border-cyan-500 p-4 flex flex-col justify-between hover:shadow-md transition"},[e("div",null,[e("div",he,[e("h4",fe,r(s.nomor_nota),1),e("span",{class:J(["text-xs px-2 py-0.5 rounded-full font-medium",T(s.jenis)])},r(s.jenis),3)]),e("p",xe,r(s.perihal),1),e("p",ve,[e("span",be,"Rp. "+r(_(N)(s.anggaran)),1),t[10]||(t[10]=e("span",{class:"text-gray-700 mx-2"},"|",-1)),e("span",_e,r(_(se)(s.tanggal_pengajuan)),1),s.is_belanja_modal?(n(),i("span",ke,"|")):w("",!0),s.is_belanja_modal?(n(),i("span",we," Belanja Modal ")):w("",!0)]),e("div",ye,[t[11]||(t[11]=e("span",{class:"font-medium"},"Dari Nota:",-1)),s.parents&&s.parents.length>0?(n(),i("div",je,[e("ul",Ce,[(n(!0),i(y,null,C(s.parents,u=>(n(),i("li",{key:u.id},[q(r(u.nomor_nota)+" - "+r(u.perihal)+" ",1),e("span",Se," (Sisa: Rp. "+r(_(N)(u.sisa_anggaran))+") ",1)]))),128))])])):w("",!0)])]),e("div",De,[l(S,{text:"Lampiran",bgColor:"bg-purple-600"},{default:k(()=>[e("button",{onClick:u=>L(s),class:"text-purple-600 hover:bg-purple-100 p-2 rounded"},[l(h,{icon:["fas","paperclip"]})],8,$e)]),_:2},1024),l(S,{text:"Edit",bgColor:"bg-blue-600"},{default:k(()=>[e("button",{onClick:u=>U(s),class:"text-blue-600 hover:bg-blue-100 p-2 rounded"},[l(h,{icon:"edit"})],8,Me)]),_:2},1024),l(S,{text:"Hapus",bgColor:"bg-red-600"},{default:k(()=>[e("button",{onClick:u=>A(s),class:"text-red-600 hover:bg-red-100 p-2 rounded"},[l(h,{icon:"trash-alt"})],8,Ne)]),_:2},1024)])]))),128))])),o.notaDinas.last_page>1?(n(),R(Q,{key:2,links:o.notaDinas.links,meta:{from:o.notaDinas.from,to:o.notaDinas.to,total:o.notaDinas.total},class:"mt-8"},null,8,["links","meta"])):w("",!0)])])]),l(Y,{show:g.value,isEdit:!!f.value,notaData:f.value,skpd:o.skpd,"parent-notes":o.parentNotes,tahun:o.tahun,"kegiatan-options":d.kegiatanOptions,"sub-kegiatan-options":d.subKegiatanOptions,onClose:t[4]||(t[4]=s=>g.value=!1),onSuccess:M},null,8,["show","isEdit","notaData","skpd","parent-notes","tahun","kegiatan-options","sub-kegiatan-options"]),l(Z,{show:v.value.show,notaId:v.value.notaId,onClose:t[5]||(t[5]=()=>$("attachment"))},null,8,["show","notaId"]),l(ee,{show:x.value.show,notaDinas:x.value.notaDinas,onClose:t[6]||(t[6]=()=>$("delete")),onSuccess:M},null,8,["show","notaDinas"])]),_:1})],64)}}};export{Je as default};
