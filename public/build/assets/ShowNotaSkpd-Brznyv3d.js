import{l as h,A as L,W as b,i as I,m as W,r as q,h as c,o as l,a as o,u as $,g as H,w as g,b as e,t as d,j as M,F as v,z as S,y as O,e as w,c as T,n as R}from"./app-BFIzMVFd.js";import{_ as G}from"./AuthenticatedLayout-C6jx-peY.js";import{_ as Q}from"./Pagination-Mj91XlTq.js";import X from"./NotaModal-D5gGqSBj.js";import Y from"./DeleteNotaModal-DqQRWo7r.js";import Z from"./LampiranModal-DgAVUKvQ.js";import ee from"./ChildNotaRow-DrO-L_yy.js";import{f as te,a as se}from"./formatters--Bkvj4ca.js";import{_ as ae}from"./SearchInput-D6kPj4dm.js";import{_ as y}from"./Tooltip-CKiwYQvw.js";import{_ as oe}from"./SuccessFlash-K6L5X7l6.js";import"./Modal-By5cnOVT.js";import"./PrimaryButton-DMpJWd03.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-B7RMHXRj.js";import"./DangerButton-DalIR-J_.js";const ne={class:"pt-6 sm:pt-24 mx-2 sm:px-2"},le={class:"max-w-8xl mx-auto sm:px-6 lg:px-6 space-y-4"},ie={class:"bg-gradient-to-br from-indigo-600 to-blue-500 text-white rounded-lg p-6 shadow-md flex flex-col sm:flex-row justify-between items-start sm:items-center"},re={class:"text-3xl font-bold"},de={class:"text-sm mt-1 opacity-80"},ue={class:"bg-white shadow-sm sm:rounded-lg overflow-hidden border border-gray-200 p-6"},ce={class:"py-4 border-b border-gray-200 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},pe={class:"w-full sm:flex-1"},he={class:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto"},me=["value"],fe=["value"],ge={class:"overflow-x-auto"},ve={class:"table-auto w-full"},xe={class:"even:bg-gray-100"},ke={class:"px-3 py-2 text-sm font-semibold"},_e={class:"px-3 py-2 text-sm"},be={class:"px-3 py-2 whitespace-nowrap text-sm"},we={class:"px-3 py-2 text-sm"},ye={class:"px-3 py-2 text-sm"},Ce={class:"px-3 py-2 text-sm font-medium space-x-1"},De=["onClick"],$e=["onClick"],Se=["onClick"],Ne=["onClick"],je={key:0},Ee={colspan:"6",class:"px-6 py-8 text-center"},Ve={class:"flex flex-col items-center justify-center text-gray-400"},Ae={class:"text-sm"},Be={class:"mt-4"},Qe={__name:"ShowNotaSkpd",props:{skpd:Object,notaDinas:Object,tahunOptions:Array,tahunSelected:Number,jenisOptions:Array,jenisSelected:String},setup(i){const r=i,m=h("");L(m,a=>{b.get(route("nota-skpd.show",{nota_skpd:r.skpd.id}),{search:a},{preserveState:!0,replace:!0})});const N=I(()=>W().props.flash||{}),F=()=>{N.value.success=null},p=h(r.tahunSelected),u=h([]),n=h({show:!1,isEditing:!1,notaDinas:null,isChild:!1,parentNota:null,skpd:r.skpd}),x=h({show:!1,notaDinas:null}),f=h({show:!1,notaId:null}),j=I(()=>r.notaDinas.data.filter(a=>!a.dikaitkan_oleh||a.dikaitkan_oleh.length===0)),P=a=>{const t="px-2 py-1 rounded-full text-xs font-medium";switch(a){case"Perda":return`${t} bg-blue-100 text-blue-800`;case"Perbup":return`${t} bg-green-100 text-green-800`;case"SK":return`${t} bg-purple-100 text-purple-800`;case"Rekomendasi":return`${t} bg-yellow-100 text-yellow-800`;case"Surat":return`${t} bg-orange-100 text-orange-800`;case"Telaah":return`${t} bg-gray-200 text-gray-800`;case"Instruksi":return`${t} bg-pink-100 text-pink-800`;case"Edaran":return`${t} bg-teal-100 text-teal-800`;default:return`${t} bg-gray-100 text-gray-800`}},U=a=>{p.value=a,b.get(route("nota-skpd.show",r.skpd.id),{search:m.value,tahun:a},{preserveState:!0,replace:!0})},k=h(r.jenisSelected||""),z=a=>{k.value=a,b.get(route("nota-skpd.show",r.skpd.id),{search:m.value,tahun:p.value,jenis:a},{preserveState:!0,replace:!0})},J=a=>{const t=u.value.indexOf(a);t===-1?u.value.push(a):u.value.splice(t,1)},K=(a=!1,t=null)=>{n.value={show:!0,isEditing:!1,notaDinas:null,isChild:a,parentNota:t,skpd:r.skpd}},E=a=>{n.value={show:!0,isEditing:!0,notaDinas:a,isChild:a.dikaitkan_oleh&&a.dikaitkan_oleh.length>0,parentNota:a.dikaitkan_oleh&&a.dikaitkan_oleh.length>0?a.dikaitkan_oleh[0]:null,skpd:r.skpd}},V=a=>{f.value={show:!0,notaId:a.id}},A=a=>{x.value={show:!0,notaDinas:a}},C=a=>{switch(a){case"nota":n.value.show=!1,n.value.isChild=!1,n.value.parentNota=null;break;case"attachment":f.value.show=!1,f.value.notaId=null;break;case"delete":x.value.show=!1;break}},B=()=>{const a=[...u.value];u.value=[],b.reload({only:["notaDinas","skpd"],preserveState:!0,onSuccess:()=>{u.value=r.notaDinas.data.filter(t=>a.includes(t.id)).map(t=>t.id)}})};return(a,t)=>{const _=q("font-awesome-icon");return l(),c(v,null,[o($(H),{title:`${i.skpd.nama_skpd}`},null,8,["title"]),o(G,null,{default:g(()=>[o(oe,{flash:N.value,onClearFlash:F},null,8,["flash"]),e("div",ne,[e("div",le,[e("div",ie,[e("div",null,[e("h2",re,d(i.skpd.nama_skpd),1),e("p",de,"Tahun: "+d(p.value),1)])]),e("div",ue,[e("div",ce,[e("div",pe,[o(ae,{search:m.value,"onUpdate:search":t[0]||(t[0]=s=>m.value=s),class:"w-full",placeholder:"Cari no atau perihal..."},null,8,["search"])]),e("div",he,[e("div",null,[M(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),onChange:t[2]||(t[2]=s=>U(p.value)),class:"w-full sm:w-30 rounded border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[(l(!0),c(v,null,S(i.tahunOptions,s=>(l(),c("option",{key:s,value:s},d(s),9,me))),128))],544),[[O,p.value]])]),e("div",null,[M(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>k.value=s),onChange:t[4]||(t[4]=s=>z(k.value)),class:"w-full sm:w-30 rounded border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[t[9]||(t[9]=e("option",{value:""},"Semua Jenis",-1)),(l(!0),c(v,null,S(i.jenisOptions,s=>(l(),c("option",{key:s,value:s},d(s),9,fe))),128))],544),[[O,k.value]])]),e("div",null,[e("button",{onClick:t[5]||(t[5]=s=>K()),class:"w-full sm:w-auto px-3 py-2 bg-indigo-500 text-white text-sm font-medium rounded hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors shadow-sm"}," + Buat Nota ")])])]),e("div",ge,[e("table",ve,[t[10]||(t[10]=e("thead",{class:"bg-gray-200"},[e("tr",{class:"text-left"},[e("th",{class:"px-3 py-2"},"No. Nota"),e("th",{class:"px-3 py-2"},"Perihal"),e("th",{class:"px-3 py-2"},"Anggaran"),e("th",{class:"px-3 py-2"},"Tanggal"),e("th",{class:"px-3 py-2"},"Jenis"),e("th")])],-1)),e("tbody",null,[(l(!0),c(v,null,S(j.value,s=>(l(),c(v,{key:s.id},[e("tr",xe,[e("td",ke,d(s.nomor_nota),1),e("td",_e,d(s.perihal),1),e("td",be,d($(te)(s.anggaran)),1),e("td",we,d($(se)(s.tanggal_pengajuan)),1),e("td",ye,[e("span",{class:R(P(s.jenis))},d(s.jenis),3)]),e("td",Ce,[o(y,{text:"Edit",bgColor:"bg-blue-500"},{default:g(()=>[e("button",{onClick:D=>E(s),class:"text-blue-600 px-2 py-1 rounded hover:bg-blue-200 transition-colors"},[o(_,{icon:["fas","pen-to-square"]})],8,De)]),_:2},1024),o(y,{text:"Lampiran",bgColor:"bg-purple-500"},{default:g(()=>[e("button",{onClick:D=>V(s),class:"text-purple-600 px-2 py-1 rounded hover:bg-purple-200 transition-colors"},[o(_,{icon:["fas","paperclip"]})],8,$e)]),_:2},1024),o(y,{text:"Hapus",bgColor:"bg-red-500"},{default:g(()=>[e("button",{onClick:D=>A(s),class:"text-red-600 px-2 py-1 rounded hover:bg-red-200 transition-colors"},[o(_,{icon:["fas","trash"]})],8,Se)]),_:2},1024),o(y,{text:u.value.includes(s.id)?"Tutup nota terkait":"Buka nota terkait",bgColor:"bg-gray-500"},{default:g(()=>[s.terkait&&s.terkait.length>0?(l(),c("button",{key:0,onClick:D=>J(s.id),class:"p-1 rounded hover:bg-gray-300 transition-colors"},[o(_,{icon:u.value.includes(s.id)?["fas","chevron-up"]:["fas","chevron-down"]},null,8,["icon"])],8,Ne)):w("",!0)]),_:2},1032,["text"])])]),u.value.includes(s.id)&&s.terkait&&s.terkait.length>0?(l(),T(ee,{key:0,children:s.terkait,onEdit:E,onViewAttachment:V,onDelete:A},null,8,["children"])):w("",!0)],64))),128)),j.value.length===0?(l(),c("tr",je,[e("td",Ee,[e("div",Ve,[e("p",Ae,"Tidak ada nota dinas untuk SKPD ini pada tahun "+d(p.value)+".",1)])])])):w("",!0)])])]),e("div",Be,[i.notaDinas.last_page>1?(l(),T(Q,{key:0,links:i.notaDinas.links,meta:{from:i.notaDinas.from,to:i.notaDinas.to,total:i.notaDinas.total}},null,8,["links","meta"])):w("",!0)])])])]),o(X,{show:n.value.show,isEdit:n.value.isEditing,notaData:n.value.notaDinas,skpd:n.value.skpd,isChild:n.value.isChild,parentNota:n.value.parentNota,onClose:t[6]||(t[6]=()=>C("nota")),onSuccess:B},null,8,["show","isEdit","notaData","skpd","isChild","parentNota"]),o(Z,{show:f.value.show,notaId:f.value.notaId,onClose:t[7]||(t[7]=()=>C("attachment"))},null,8,["show","notaId"]),o(Y,{show:x.value.show,notaDinas:x.value.notaDinas,onClose:t[8]||(t[8]=()=>C("delete")),onSuccess:B},null,8,["show","notaDinas"])]),_:1})],64)}}};export{Qe as default};
