import{m as E,i as y,l as u,r as O,h as d,o as n,a as s,u as f,g as V,w as g,b as t,c as h,e as r,F as T,z as Y,t as i,W as j}from"./app-BFIzMVFd.js";import{_ as L}from"./AuthenticatedLayout-C6jx-peY.js";import{_ as R}from"./Pagination-Mj91XlTq.js";import W from"./KabupatenModal-Dcqrm379.js";import z from"./ConfirmationCopyModal-CcJfnSiI.js";import{_ as C}from"./Tooltip-CKiwYQvw.js";import{_ as A}from"./SuccessFlash-K6L5X7l6.js";import{_ as I}from"./ErrorFlash-HvhEktw7.js";import{f as k}from"./formatters--Bkvj4ca.js";import"./Modal-By5cnOVT.js";import"./InputLabel-DrIpQjD0.js";import"./TextInput-CMlNlbfd.js";import"./InputError-CQqX-vWw.js";import"./PrimaryButton-DMpJWd03.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-B7RMHXRj.js";const q={class:"pt-6 sm:pt-24 mx-2 sm:px-2"},G={class:"max-w-8xl mx-auto sm:px-6 lg:px-6"},H={class:"bg-white shadow-sm sm:rounded-lg p-6"},J={class:"flex justify-between items-center mb-4"},Q={class:"overflow-x-auto"},U={class:"table-auto w-full"},X={class:"px-3 py-2"},Z={class:"px-3 py-2"},tt={class:"px-3 py-2"},et={class:"px-3 py-2"},at={class:"px-3 py-2"},st={class:"px-3 py-2"},nt=["onClick"],ot=["onClick"],lt={class:"px-2 py-1 text-sm sm:text-lg font-semibold rounded transition text-red-600 hover:bg-red-100"},ut={key:0},wt={__name:"Index",props:{kabupatens:Object},setup(o){const S=E(),c=y(()=>S.props.flash||{}),w=()=>{c.value.success=null,c.value.error=null},x=u(!1),_=u(null),m=u(!1),l=u(null),b=u(!1),N=y(()=>l.value?Number(l.value.tahun_anggaran)-1:null),B=y(()=>l.value?Number(l.value.tahun_anggaran):null);function $(p=null){_.value=p,x.value=!0}function D(){x.value=!1,_.value=null}function P(p){l.value=p,m.value=!0}function K(){b.value=!0,j.post(route("kabupaten.copyFromPrevious",l.value.id),{},{onSuccess:()=>{F()},onError:()=>{F()},onFinish:()=>{b.value=!1}})}function F(){m.value=!1,l.value=null}return(p,a)=>{const v=O("font-awesome-icon");return n(),d(T,null,[s(f(V),{title:"Kabupaten"}),s(L,null,{default:g(()=>[s(A,{flash:c.value,onClearFlash:w},null,8,["flash"]),s(I,{flash:c.value,onClearFlash:w},null,8,["flash"]),t("div",q,[t("div",G,[t("div",H,[t("div",J,[a[2]||(a[2]=t("h2",{class:"text-xl font-semibold text-gray-800"},"Daftar Pagu",-1)),t("button",{onClick:a[0]||(a[0]=e=>$()),class:"inline-flex items-center px-3 sm:px-4 py-2 bg-indigo-500 text-white text-sm sm:text-base font-medium rounded hover:bg-indigo-700"}," + Buat Pagu ")]),t("div",Q,[t("table",U,[a[4]||(a[4]=t("thead",null,[t("tr",{class:"bg-gray-100 text-left"},[t("th",{class:"px-3 py-2"},"Nama Kabupaten"),t("th",{class:"px-3 py-2"},"Tahun"),t("th",{class:"px-3 py-2"},"Pagu"),t("th",{class:"px-3 py-2"},"Total Serapan"),t("th",{class:"px-3 py-2"},"Persentase Serapan"),t("th",{class:"px-3 py-2"})])],-1)),t("tbody",null,[(n(!0),d(T,null,Y(o.kabupatens.data,e=>(n(),d("tr",{key:e.id,class:"hover:bg-gray-100"},[t("td",X,i(e.nama),1),t("td",Z,i(e.tahun_anggaran),1),t("td",tt,"Rp. "+i(f(k)(e.pagu)),1),t("td",et,"Rp. "+i(f(k)(e.total_serapan)),1),t("td",at,i(f(k)(e.presentase_serapan))+"%",1),t("td",st,[e.tahun_anggaran==new Date().getFullYear()?(n(),h(C,{key:0,text:"Edit Kabupaten",bgColor:"bg-blue-500"},{default:g(()=>[t("button",{onClick:M=>$(e),class:"px-2 py-1 text-sm sm:text-lg font-semibold rounded transition text-blue-600 hover:bg-blue-100"},[s(v,{icon:"edit"})],8,nt)]),_:2},1024)):r("",!0),e.tahun_anggaran==new Date().getFullYear()?(n(),h(C,{key:1,text:"Copy Data Tahun Lalu",bgColor:"bg-green-500"},{default:g(()=>[t("button",{onClick:M=>P(e),class:"px-2 py-1 text-sm sm:text-lg font-semibold rounded transition text-green-600 hover:bg-green-100"},[s(v,{icon:"copy"})],8,ot)]),_:2},1024)):r("",!0),e.tahun_anggaran!=new Date().getFullYear()?(n(),h(C,{key:2,text:"Tahun Anggaran Terkunci",bgColor:"bg-red-500"},{default:g(()=>[t("button",lt,[s(v,{icon:"lock"})])]),_:1})):r("",!0)])]))),128)),o.kabupatens.data.length===0?(n(),d("tr",ut,a[3]||(a[3]=[t("td",{colspan:"6",class:"px-4 py-2 text-center"},"Belum ada data",-1)]))):r("",!0)])])]),o.kabupatens.last_page>1?(n(),h(R,{key:0,links:o.kabupatens.links,meta:{from:o.kabupatens.from,to:o.kabupatens.to,total:o.kabupatens.total}},null,8,["links","meta"])):r("",!0)])])]),s(W,{show:x.value,kabupaten:_.value,onClose:D},null,8,["show","kabupaten"]),s(z,{show:m.value,tahunSumber:N.value,tahunTarget:B.value,isCopying:b.value,onConfirm:K,onCancel:a[1]||(a[1]=e=>m.value=!1)},null,8,["show","tahunSumber","tahunTarget","isCopying"])]),_:1})],64)}}};export{wt as default};
