import{l as r,p as k,A as v,h as g,o as w,b as s,q as h}from"./app-BFIzMVFd.js";import{C as b}from"./auto-Cz6uSJnr.js";const C={class:"grid gap-6 md:grid-cols-2"},_={class:"bg-white rounded-lg shadow overflow-hidden"},y={class:"p-4"},j={class:"bg-white rounded-lg shadow overflow-hidden"},I={class:"p-4"},D={__name:"RekapCharts",props:{skpdId:Number,selectedTahun:Number},setup(m){const t=m,i=r(null),p=r(null),l=r(null),d=r(null),f={Pelaksanaan:"#4f46e5",GU:"#f59e0b",TU:"#10b981",LS:"#ec4899",Perda:"#2563eb",Perbup:"#14b8a6",SK:"#8b5cf6",Rekomendasi:"#eab308",Surat:"#0ea5e9",Telaah:"#ef4444",Edaran:"#34d399",Instruksi:"#22d3ee"},u=async()=>{const{data:n}=await h.get(route("skpds.api.rekap-nota-per-jenis",t.skpdId),{params:{tahun:t.selectedTahun}}),a=n.rekap||[];l.value&&l.value.destroy(),l.value=new b(i.value,{type:"doughnut",data:{labels:a.map(e=>e.jenis),datasets:[{data:a.map(e=>e.jumlah),backgroundColor:a.map(e=>f[e.jenis]||"#9ca3af")}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},tooltip:{callbacks:{label:e=>`${e.label}: ${e.raw} nota`}}}}})},c=async()=>{const{data:n}=await h.get(route("skpds.api.tren-nota-per-bulan",t.skpdId),{params:{tahun:t.selectedTahun}}),a=n.data.map(o=>new Date(0,o.bulan-1).toLocaleString("id-ID",{month:"short"})),e=n.data.map(o=>o.jumlah);d.value&&d.value.destroy(),d.value=new b(p.value,{type:"line",data:{labels:a,datasets:[{label:"Jumlah Nota Dinas",data:e,backgroundColor:"#4f46e5",borderColor:"#4f46e5",pointBorderColor:"#0284c7",borderWidth:1.5,tension:.4,fill:!0}]},options:{responsive:!0,plugins:{legend:{display:!0},tooltip:{callbacks:{label:o=>`${o.raw} nota`}}}}})};return k(()=>{u(),c()}),v(()=>t.selectedTahun,()=>{u(),c()}),(n,a)=>(w(),g("div",C,[s("div",_,[a[0]||(a[0]=s("div",{class:"p-4 border-b"},[s("h3",{class:"font-semibold text-gray-700"},"Rekap Nota Dinas per Jenis")],-1)),s("div",y,[s("canvas",{ref_key:"rekapjenisChart",ref:i,class:"h-96"},null,512)])]),s("div",j,[a[1]||(a[1]=s("div",{class:"p-4 border-b"},[s("h3",{class:"font-semibold text-gray-700"},"Tren Pengajuan per Bulan")],-1)),s("div",I,[s("canvas",{ref_key:"trenChart",ref:p,class:"h-64"},null,512)])])]))}};export{D as default};
