import{l as C,x as U,A as w,i as E,r as N,c as f,o as m,w as g,b as t,h as y,d as P,a as n,u as s,f as d,e as V,t as b}from"./app-BFIzMVFd.js";import{_ as j}from"./Modal-By5cnOVT.js";import{_}from"./InputError-CQqX-vWw.js";import{_ as x}from"./TextInput-CMlNlbfd.js";import{P as $}from"./PrimaryButton-DMpJWd03.js";import{_ as S}from"./SecondaryButton-B7RMHXRj.js";import{D as H}from"./DangerButton-DalIR-J_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"p-6"},K={class:"mb-4"},O={class:"mb-4"},A={class:"mb-4"},L={class:"flex justify-end gap-2"},R={key:1},T={class:"text-center"},W={class:"mt-2 text-gray-700"},q={class:"font-semibold text-red-400"},z={class:"flex justify-end gap-2"},ae={__name:"SubKegiatanModal",props:{show:Boolean,kegiatan:Object,subKegiatan:Object,isEditing:Boolean},emits:["close","success"],setup(p,{emit:B}){const i=p,c=B,k=C(i.show),a=U({id:null,kode_rekening:"",nama:"",pagu:0,kegiatan_id:null,tahun_anggaran:""});w(()=>i.show,o=>{k.value=o}),w([()=>i.show,()=>i.subKegiatan],([o,e])=>{var r;o&&e&&(a.id=e.id??null,a.kode_rekening=e.kode_rekening??"",a.nama=e.nama??"",a.pagu=e.pagu??0,a.kegiatan_id=e.kegiatan_id??((r=i.kegiatan)==null?void 0:r.id)??null,a.tahun_anggaran=e.tahun_anggaran??"")},{immediate:!0});const u=()=>{k.value=!1,a.reset(),c("close")},M=()=>{a.put(route("kegiatans.subkegiatans.update",{kegiatan:i.kegiatan.id,subkegiatan:a.id}),{preserveScroll:!0,onSuccess:()=>{c("success","Sub kegiatan berhasil diperbarui"),u()}})},h=()=>{a.delete(route("kegiatans.subkegiatans.destroy",{kegiatan:i.kegiatan.id,subkegiatan:a.id}),{preserveScroll:!0,onSuccess:()=>{c("success","Sub kegiatan berhasil dihapus"),u()}})},v=E({get(){return a.pagu===null||a.pagu===""?"":parseInt(a.pagu,10).toLocaleString("id-ID")},set(o){const e=o.replace(/\D/g,"");a.pagu=e}}),D=o=>{const e=o.replace(/\D/g,"");a.pagu=e};return(o,e)=>{const r=N("font-awesome-icon");return m(),f(j,{show:k.value,title:p.isEditing?"Edit Uraian Sub Kegiatan":"Hapus Uraian Sub Kegiatan",maxWidth:"2xl",closeable:"",onClose:u},{default:g(()=>[t("div",I,[p.isEditing?(m(),y("form",{key:0,onSubmit:P(M,["prevent"])},[t("div",K,[e[4]||(e[4]=t("label",{class:"block text-gray-700 text-sm font-medium mb-1"},"Kode Rekening",-1)),n(x,{modelValue:s(a).kode_rekening,"onUpdate:modelValue":e[0]||(e[0]=l=>s(a).kode_rekening=l),class:"w-full",placeholder:"Masukkan kode rekening"},null,8,["modelValue"]),n(_,{message:s(a).errors.kode_rekening},null,8,["message"])]),t("div",O,[e[5]||(e[5]=t("label",{class:"block text-gray-700 text-sm font-medium mb-1"},"Nama Uraian Sub Kegiatan",-1)),n(x,{modelValue:s(a).nama,"onUpdate:modelValue":e[1]||(e[1]=l=>s(a).nama=l),class:"w-full",placeholder:"Masukkan uraian sub kegiatan"},null,8,["modelValue"]),n(_,{message:s(a).errors.nama},null,8,["message"])]),t("div",A,[e[6]||(e[6]=t("label",{class:"block text-gray-700 text-sm font-medium mb-1"},"Pagu",-1)),n(x,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=l=>v.value=l),class:"w-full",placeholder:"Masukkan pagu",type:"text",onInput:e[3]||(e[3]=l=>D(l.target.value))},null,8,["modelValue"]),n(_,{message:s(a).errors.pagu},null,8,["message"])]),t("div",L,[n(S,{onClick:u,disabled:s(a).processing},{default:g(()=>e[7]||(e[7]=[d(" Batal ")])),_:1},8,["disabled"]),n($,{disabled:s(a).processing},{default:g(()=>[s(a).processing?(m(),f(r,{key:0,icon:"spinner",spin:"",class:"mr-2"})):V("",!0),d(" "+b(s(a).processing?"Mengupdate...":"Update"),1)]),_:1},8,["disabled"])])],32)):(m(),y("div",R,[t("div",T,[n(r,{icon:["fas","triangle-exclamation"],class:"text-red-500 text-4xl fa-fade"}),t("div",W,[e[8]||(e[8]=d(" Hapus uraian sub kegiatan ")),t("span",q,b(s(a).nama),1),e[9]||(e[9]=d("? ")),e[10]||(e[10]=t("br",null,null,-1)),e[11]||(e[11]=d(" Data yang dihapus tidak dapat dikembalikan. "))]),t("div",z,[n(S,{onClick:u,disabled:s(a).processing},{default:g(()=>e[12]||(e[12]=[d(" Batal ")])),_:1},8,["disabled"]),n(H,{onClick:h,disabled:s(a).processing},{default:g(()=>[s(a).processing?(m(),f(r,{key:0,icon:"spinner",spin:"",class:"mr-2"})):V("",!0),d(" "+b(s(a).processing?"Menghapus...":"Hapus"),1)]),_:1},8,["disabled"])])])]))])]),_:1},8,["show","title"])}}};export{ae as default};
