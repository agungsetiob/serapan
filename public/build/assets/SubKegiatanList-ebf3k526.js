import{l as V,r as D,h as i,o as l,b as e,e as u,a as n,f as b,F as w,z as S,d as $,t as d,u as f,n as _,Q as j,w as m,c as B}from"./app-BFIzMVFd.js";import{_ as y}from"./TextInput-CMlNlbfd.js";import{_ as v}from"./InputError-CQqX-vWw.js";import{_ as c}from"./Tooltip-CKiwYQvw.js";import{f as h,a as U}from"./formatters--Bkvj4ca.js";const F={class:"px-6 py-4"},E={class:"font-medium text-gray-700 mb-3 flex items-center"},P={class:"mb-2"},R={class:"flex flex-col gap-3 rounded-md"},L={class:"flex flex-col sm:flex-row justify-between gap-3"},T={class:"flex-1 min-w-0"},z={class:"flex justify-between items-start gap-2"},A=["onClick"],O={class:"mt-1 text-sm text-gray-600 space-y-1"},H={class:"flex flex-wrap gap-x-3 gap-y-1"},J={class:"w-full bg-gray-200 rounded-full h-2"},M={key:0,class:"flex items-center gap-3 sm:gap-2"},Q=["onClick"],q=["onClick"],G=["onClick"],W={key:0,class:"mt-3 bg-gray-50 rounded-lg p-4 transition-all duration-300"},X={class:"mb-4"},Y={key:0,class:"overflow-x-auto"},Z={class:"min-w-full divide-y divide-gray-200"},I={class:"bg-white divide-y divide-gray-200"},ee={class:"px-4 py-3 whitespace-nowrap text-sm"},te={class:"px-4 py-3 whitespace-nowrap text-sm"},ae={class:"px-4 py-3 text-sm"},se={class:"px-4 py-3 whitespace-nowrap text-sm"},ne={key:0,class:"text-xs text-gray-500"},oe={class:"px-4 py-3 whitespace-nowrap text-sm"},le={key:0,class:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium"},ie={class:"flex justify-end space-x-2"},de=["onClick"],re=["onClick"],ue=["onClick"],me={key:1,class:"text-center py-4 text-gray-500 text-sm"},ce={key:0,class:"bg-gray-50 p-4 rounded-lg"},ge={class:"grid grid-cols-1 md:grid-cols-6 gap-2"},xe={class:"md:col-span-3"},fe={class:"flex justify-end"},pe=["disabled"],ke={__name:"SubKegiatanList",props:{kegiatan:Object,formSubKegiatan:Object,formatNumber:Function,onSubmit:Function,onEdit:Function,onDelete:Function,showButtons:{type:Boolean,default:!0}},emits:["createNotaDinas","editNota","deleteNota","viewAttachment"],setup(a,{emit:C}){const p=C,g=V([]),K=x=>{const s=g.value.indexOf(x);s===-1?g.value.push(x):g.value.splice(s,1)},N=x=>{switch(x){case"Pelaksanaan":return"bg-yellow-100 text-yellow-800";case"TU":return"bg-indigo-100 text-indigo-800";case"LS":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(x,s)=>{const r=D("font-awesome-icon");return l(),i("div",F,[e("h4",E,[n(r,{icon:["fas","suitcase"],class:"mr-1 text-red-500"}),s[5]||(s[5]=b(" Daftar Uraian Sub Kegiatan "))]),e("ul",P,[(l(!0),i(w,null,S(a.kegiatan.sub_kegiatans,t=>(l(),i("li",{key:t.id,class:"py-4 px-2 hover:bg-gray-100 rounded-lg transition-colors duration-150"},[e("div",R,[e("div",L,[e("div",T,[e("div",z,[e("button",{onClick:o=>K(t.id),class:"text-left text-blue-600 hover:text-green-600 font-medium"},[b(d(t.kode_rekening)+" - "+d(t.nama)+" ",1),n(r,{icon:["fas",g.value.includes(t.id)?"chevron-up":"chevron-down"],class:"ml-2 text-sm"},null,8,["icon"])],8,A)]),e("div",O,[e("div",H,[e("span",null,"Pagu: Rp "+d(f(h)(t.pagu)),1),e("span",null,"Serapan: Rp "+d(f(h)(t.total_serapan)),1),e("div",null,[s[6]||(s[6]=e("span",null,"Persentase: ",-1)),e("span",{class:_(["font-medium",{"text-green-600":t.presentase_serapan>=80,"text-yellow-600":t.presentase_serapan>=50&&t.presentase_serapan<80,"text-red-600":t.presentase_serapan<50}])},d(t.presentase_serapan)+"% ",3)])]),e("div",J,[e("div",{class:_(["h-full rounded-full transition-all duration-500",{"bg-green-500":t.presentase_serapan>=80,"bg-yellow-500":t.presentase_serapan>=50&&t.presentase_serapan<80,"bg-red-500":t.presentase_serapan<50}]),style:j({width:t.presentase_serapan+"%"})},null,6)])])]),a.showButtons?(l(),i("div",M,[n(c,{text:"Nota Dinas",bgColor:"bg-gray-500"},{default:m(()=>[e("button",{onClick:o=>p("createNotaDinas",t),class:"px-2 py-1 text-xs sm:text-sm rounded text-gray-600 hover:bg-gray-200"},[n(r,{icon:["fas","file-circle-plus"],class:"text-sm sm:text-base"})],8,Q)]),_:2},1024),n(c,{text:"Edit",bgColor:"bg-blue-500"},{default:m(()=>[e("button",{onClick:o=>a.onEdit(t,a.kegiatan),class:"px-2 py-1 text-xs sm:text-sm rounded text-blue-600 hover:bg-blue-200"},[n(r,{icon:["fas","edit"],class:"text-sm sm:text-base"})],8,q)]),_:2},1024),n(c,{text:"Hapus",bgColor:"bg-red-500"},{default:m(()=>[e("button",{onClick:o=>a.onDelete(t,a.kegiatan),class:"px-2 py-1 text-xs sm:text-sm rounded text-red-600 hover:bg-red-100"},[n(r,{icon:["fas","trash-can"],class:"text-sm sm:text-base"})],8,G)]),_:2},1024)])):u("",!0)]),g.value.includes(t.id)?(l(),i("div",W,[e("div",X,[s[8]||(s[8]=e("h5",{class:"text-sm font-medium text-gray-700 mb-2"}," Daftar Nota Dinas ",-1)),t.nota_dinas&&t.nota_dinas.length?(l(),i("div",Y,[e("table",Z,[s[7]||(s[7]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium"}," Nomor "),e("th",{class:"px-4 py-2 text-left text-xs font-medium"}," Tanggal "),e("th",{class:"px-4 py-2 text-left text-xs font-medium"}," Perihal "),e("th",{class:"px-4 py-2 text-left text-xs font-medium"}," Anggaran "),e("th",{class:"px-4 py-2 text-left text-xs font-medium"}," Jenis "),e("th")])],-1)),e("tbody",I,[(l(!0),i(w,null,S(t.nota_dinas,o=>(l(),i("tr",{key:o.id,class:"hover:bg-gray-100"},[e("td",ee,[b(d(o.nomor_nota)+" ",1),o.is_belanja_modal?(l(),B(r,{key:0,icon:"fas fa-check-circle",class:"text-green-600"})):u("",!0)]),e("td",te,d(f(U)(o.tanggal_pengajuan)),1),e("td",ae,d(o.perihal),1),e("td",se,[b(" Rp "+d(f(h)(o.anggaran))+" ",1),o.dipakai_dari_induk>0?(l(),i("div",ne," Digunakan: Rp "+d(f(h)(o.dipakai_dari_induk)),1)):u("",!0)]),e("td",oe,[e("span",{class:_(["inline-flex items-center px-1 rounded-full text-xs font-medium",N(o.jenis)])},d(o.jenis),3)]),a.showButtons?(l(),i("td",le,[e("div",ie,[n(c,{text:"Lampiran",bgColor:"bg-purple-500"},{default:m(()=>[e("button",{onClick:k=>p("viewAttachment",o),class:"px-2 py-1 text-xs sm:text-sm rounded text-purple-600 hover:bg-purple-200"},[n(r,{icon:"paperclip"})],8,de)]),_:2},1024),n(c,{text:"Edit",bgColor:"bg-blue-400"},{default:m(()=>[e("button",{onClick:k=>p("editNota",o),class:"px-2 py-1 text-xs sm:text-sm rounded text-blue-600 hover:bg-blue-100"},[n(r,{icon:"edit"})],8,re)]),_:2},1024),n(c,{text:"Hapus",bgColor:"bg-red-500"},{default:m(()=>[e("button",{onClick:k=>p("deleteNota",o),class:"px-2 py-1 text-xs sm:text-sm rounded text-red-600 hover:bg-red-100"},[n(r,{icon:"trash"})],8,ue)]),_:2},1024)])])):u("",!0)]))),128))])])])):(l(),i("div",me," Belum ada nota dinas untuk uraian sub kegiatan ini. "))])])):u("",!0)])]))),128))]),a.formSubKegiatan?(l(),i("div",ce,[s[9]||(s[9]=e("h5",{class:"text-sm font-medium text-gray-700 mb-3"}," Tambah Uraian Sub Kegiatan ",-1)),e("form",{onSubmit:s[4]||(s[4]=$(t=>a.onSubmit(a.kegiatan.id),["prevent"])),class:"space-y-3"},[e("div",ge,[e("div",null,[n(y,{modelValue:a.formSubKegiatan.kode_rekening,"onUpdate:modelValue":s[0]||(s[0]=t=>a.formSubKegiatan.kode_rekening=t),class:"w-full px-3 py-2 text-sm",placeholder:"Kode Rekening"},null,8,["modelValue"]),n(v,{message:a.formSubKegiatan.errors.kode_rekening},null,8,["message"])]),e("div",xe,[n(y,{modelValue:a.formSubKegiatan.nama,"onUpdate:modelValue":s[1]||(s[1]=t=>a.formSubKegiatan.nama=t),class:"w-full px-3 py-2 text-sm",placeholder:"Uraian Sub Kegiatan"},null,8,["modelValue"]),n(v,{message:a.formSubKegiatan.errors.nama},null,8,["message"])]),e("div",null,[n(y,{modelValue:a.formSubKegiatan.pagu,"onUpdate:modelValue":s[2]||(s[2]=t=>a.formSubKegiatan.pagu=t),class:"w-full px-3 py-2 text-sm",placeholder:"Pagu"},null,8,["modelValue"]),n(v,{message:a.formSubKegiatan.errors.pagu},null,8,["message"])]),e("div",null,[n(y,{modelValue:a.formSubKegiatan.tahun_anggaran,"onUpdate:modelValue":s[3]||(s[3]=t=>a.formSubKegiatan.tahun_anggaran=t),class:"w-full px-3 py-2 text-sm",readonly:""},null,8,["modelValue"])])]),e("div",fe,[e("button",{type:"submit",disabled:!a.formSubKegiatan.kode_rekening||!a.formSubKegiatan.nama||!a.formSubKegiatan.pagu,class:"inline-flex px-3 py-1.5 border text-xs font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"}," Simpan ",8,pe)])],32)])):u("",!0)])}}};export{ke as default};
