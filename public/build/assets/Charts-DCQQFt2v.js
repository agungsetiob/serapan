import{l,p as h,q as i,h as f,o as m,s as y}from"./app-BFIzMVFd.js";import{C as d}from"./auto-Cz6uSJnr.js";const k={class:"space-y-6"},D={__name:"Charts",setup(x){const n=l([]),o=l([]),s=l([]),p=e=>new Intl.NumberFormat("id-ID").format(e);return h(async()=>{try{const e=await i.get("/api/nota-per-year");n.value=e.data;const r=await i.get("/api/skpd/top-serapan");o.value=r.data;const u=await i.get("/api/kabupaten-serapan");s.value=u.data;const b=document.getElementById("topSkpdChart").getContext("2d");new d(b,{type:"bar",data:{labels:o.value.map(a=>a.nama_skpd),datasets:[{label:"Persentase Serapan (%)",data:o.value.map(a=>a.presentase_serapan),backgroundColor:"#ff6384",borderColor:"rgba(54, 162, 235, 1)",borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!0},tooltip:{callbacks:{label:function(a){return`${a.parsed.x}%`}}}},scales:{x:{beginAtZero:!0,max:100,ticks:{callback:function(a){return a+"%"}},grid:{color:"rgba(0, 0, 0, 0.1)"}},y:{ticks:{autoSkip:!1},grid:{color:"rgba(0, 0, 0, 0)"}}}}});const g=document.getElementById("notaDinasChart").getContext("2d");new d(g,{type:"line",data:{labels:n.value.map(a=>a.year),datasets:[{label:"Total Nota Dinas",data:n.value.map(a=>a.total),backgroundColor:"#cc65fe",borderColor:"#cc65fe",borderWidth:2,tension:.1,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}});const v=document.getElementById("kabupatenChart").getContext("2d");new d(v,{type:"bar",data:{labels:s.value.labels,datasets:[{label:"Total Serapan (Rp)",data:s.value.total_serapan,backgroundColor:"#36a2eb",borderColor:"#36a2eb",borderWidth:1,yAxisID:"y",order:1},{label:" Persentase Serapan (%)",data:s.value.presentase_serapan,backgroundColor:"#ffce56",borderColor:"#ffce56",borderWidth:7,type:"line",yAxisID:"y1",order:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function(a){let t=a.dataset.label||"",c=a.formattedValue;return t.includes("Total")?`${t}: Rp ${p(a.raw)}`:t.includes("Persentase")?`${t}: ${c}%`:t+": "+c}}},legend:{position:"top"}},scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Total Serapan (Rp)"},ticks:{callback:function(a){return p(a)}}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Persentase (%)"},min:0,max:100,grid:{drawOnChartArea:!1},ticks:{callback:function(a){return a+"%"}}},x:{title:{display:!0,text:"Tahun Anggaran"}}}}})}catch(e){console.error("Error fetching chart data:",e)}}),(e,r)=>(m(),f("div",k,r[0]||(r[0]=[y('<div class="bg-white rounded-lg shadow overflow-hidden"><div class="p-4 border-b"><h3 class="font-semibold text-gray-700">10 SKPD dengan Serapan Tertinggi</h3></div><div class="p-4"><canvas id="topSkpdChart" class="h-96"></canvas></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-white rounded-lg shadow overflow-hidden"><div class="p-4 border-b"><h3 class="font-semibold text-gray-700">Nota Dinas per Tahun</h3></div><div class="p-4"><canvas id="notaDinasChart" class="h-64"></canvas></div></div><div class="bg-white rounded-lg shadow overflow-hidden"><div class="p-4 border-b"><h3 class="font-semibold text-gray-700">Serapan Kabupaten per Tahun</h3></div><div class="p-4"><canvas id="kabupatenChart" class="h-64"></canvas></div></div></div>',2)])))}};export{D as default};
