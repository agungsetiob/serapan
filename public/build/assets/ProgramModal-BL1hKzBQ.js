import{x as V,A as x,r as y,c,o as g,w as u,b as t,t as p,d as B,a as s,u as e,f,e as E}from"./app-BFIzMVFd.js";import{_ as S}from"./Modal-By5cnOVT.js";import{_}from"./InputError-CQqX-vWw.js";import{_ as h}from"./InputLabel-DrIpQjD0.js";import{_ as b}from"./TextInput-CMlNlbfd.js";import{P as M}from"./PrimaryButton-DMpJWd03.js";import{_ as N}from"./SecondaryButton-B7RMHXRj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"p-6"},C={class:"text-lg font-medium text-gray-900 mb-4"},D={class:"mb-4"},$={class:"mb-6"},I={class:"flex justify-end gap-2"},q={__name:"ProgramModal",props:{show:Boolean,isEditing:Boolean,program:Object,skpdId:Number},emits:["close","success"],setup(n,{emit:k}){const o=n,l=k,a=V({nama:"",tahun_anggaran:new Date().getFullYear()});x(()=>o.program,i=>{o.isEditing&&i?(a.nama=i.nama,a.tahun_anggaran=i.tahun_anggaran):(a.reset(),a.tahun_anggaran=new Date().getFullYear())},{immediate:!0});function w(){if(o.isEditing)a.put(route("programs.update",o.program.id),{preserveScroll:!0,onSuccess:()=>{l("success"),m()}});else{if(!o.skpdId){console.error("SKPD ID tidak tersedia untuk membuat program baru.");return}a.post(route("programs.store",{skpd:o.skpdId}),{preserveScroll:!0,onSuccess:()=>{l("success"),m()}})}}const m=()=>{a.reset(),a.clearErrors(),l("close")};return(i,r)=>{const v=y("font-awesome-icon");return g(),c(S,{show:n.show,onClose:m},{default:u(()=>[t("div",P,[t("h2",C,p(n.isEditing?"Edit Program":"Tambah Program Baru"),1),t("form",{onSubmit:B(w,["prevent"])},[t("div",D,[s(h,{for:"nama-program",value:"Nama Program"}),s(b,{id:"nama-program",modelValue:e(a).nama,"onUpdate:modelValue":r[0]||(r[0]=d=>e(a).nama=d),type:"text",class:"mt-1 block w-full",placeholder:"Masukkan nama program"},null,8,["modelValue"]),s(_,{message:e(a).errors.nama,class:"mt-2"},null,8,["message"])]),t("div",$,[s(h,{for:"tahun-anggaran-program",value:"Tahun Anggaran"}),s(b,{id:"tahun-anggaran-program",modelValue:e(a).tahun_anggaran,"onUpdate:modelValue":r[1]||(r[1]=d=>e(a).tahun_anggaran=d),type:"number",class:"mt-1 block w-full",readonly:""},null,8,["modelValue"]),s(_,{message:e(a).errors.tahun_anggaran,class:"mt-2"},null,8,["message"])]),t("div",I,[s(N,{onClick:m,disabled:e(a).processing},{default:u(()=>r[2]||(r[2]=[f(" Batal ")])),_:1},8,["disabled"]),s(M,{disabled:e(a).processing},{default:u(()=>[e(a).processing?(g(),c(v,{key:0,icon:"spinner",spin:"",class:"mr-2"})):E("",!0),f(" "+p(e(a).processing?n.isEditing?"Mengupdate...":"Menyimpan...":n.isEditing?"Update":"Simpan"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])}}};export{q as default};
