<div class="px-6 py-4">
            <h4 class="font-medium text-gray-700 mb-3 flex items-center">
              <font-awesome-icon :icon="['fas', 'suitcase']" class="mr-1 text-red-500"/>
              Daftar Sub Kegiatan
            </h4>

            <ul class="mb-2">
              <li
                v-for="sub in kegiatan.sub_kegiatans"
                :key="sub.id"
                class="py-4 px-2 hover:bg-gray-50 rounded-lg transition-colors duration-150"
              >
                <div class="flex flex-col sm:flex-row justify-between gap-3">
                  <div class="flex-1 min-w-0">
                    <div class="flex justify-between items-start gap-2">
                      <span class="text-gray-800 font-medium truncate">{{ sub.nama }}</span>
                    </div>
                    
                    <div class="mt-1 text-sm text-gray-600 space-y-1">
                      <div class="flex flex-wrap gap-x-3 gap-y-1">
                        <span>Pagu: Rp {{ formatNumber(sub.pagu) }}</span>
                        <span>Serapan: Rp {{ formatNumber(sub.total_serapan) }}</span>
                        <span class="font-medium" :class="{
                          'text-green-600': sub.presentase_serapan >= 80,
                          'text-yellow-600': sub.presentase_serapan >= 50 && sub.presentase_serapan < 80,
                          'text-red-600': sub.presentase_serapan < 50
                        }">
                          {{ sub.presentase_serapan }}%
                        </span>
                      </div>
                      
                      <div class="w-full bg-gray-200 rounded-full h-2">
                        <div
                          class="h-full rounded-full transition-all duration-500"
                          :class="{
                            'bg-green-500': sub.presentase_serapan >= 80,
                            'bg-yellow-500': sub.presentase_serapan >= 50 && sub.presentase_serapan < 80,
                            'bg-red-500': sub.presentase_serapan < 50
                          }"
                          :style="{ width: sub.presentase_serapan + '%' }"
                        ></div>
                      </div>
                    </div>
                  </div>
                  <div class="flex items-center gap-3 sm:gap-2">
                    <button 
                      @click="editSubKegiatan(sub, kegiatan)" 
                      class="text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-50 transition-colors"
                      title="Edit"
                    >
                      <font-awesome-icon :icon="['fas', 'pen-to-square']" class="text-sm sm:text-base" />
                    </button>
                    <button 
                      @click="deleteSubKegiatan(sub, kegiatan)" 
                      class="text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-50 transition-colors"
                      title="Delete"
                    >
                      <font-awesome-icon :icon="['fas', 'trash']" class="text-sm sm:text-base" />
                    </button>
                  </div>
                </div>
              </li>
            </ul>
            <!-- Tambah Sub Kegiatan Form -->
            <div
              class="bg-gray-50 p-4 rounded-lg"
              v-if="formSubKegiatan[kegiatan.id]"
            >
              <h5 class="text-sm font-medium text-gray-700 mb-3">
                Tambah Sub Kegiatan
              </h5>
              <form
                @submit.prevent="submitSubKegiatan(kegiatan.id)"
                class="space-y-3"
              >
                <div class="grid grid-cols-1 md:grid-cols-4 gap-2">
                  <div class="md:col-span-2">
                    <TextInput v-model="formSubKegiatan[kegiatan.id].nama" class="w-full px-3 py-2 text-sm" placeholder="Nama Sub Kegiatan"/>
                    <InputError :message="formSubKegiatan[kegiatan.id].errors.nama" />
                  </div>
                  <div>
                    <TextInput v-model="formSubKegiatan[kegiatan.id].pagu" class="w-full px-3 py-2 text-sm" placeholder="Pagu"/>
                    <InputError :message="formSubKegiatan[kegiatan.id].errors.pagu" />
                  </div>
                  <div>
                    <TextInput v-model="formSubKegiatan[kegiatan.id].tahun_anggaran" class="w-full px-3 py-2 text-sm" readonly/>
                  </div>
                </div>
                <div class="flex justify-end">
                  <button
                    type="submit"
                    class="inline-flex px-3 py-1.5 border text-xs font-medium rounded shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"
                  >
                    Simpan
                  </button>
              </div>
              </form>
            </div>
          </div>